"use strict";angular.module("offClick",[]),angular.module("offClick").directive("offClick",["$rootScope","$parse","OffClickFilterCache",function(e,n,t){var c=0,o={},r=!1,i=function(e,n){if(!e||!n)return!1;for(var t=n.length,c=0;c<t;++c){var o=n[c],r=!1;try{r=o.contains(e)}catch(i){"undefined"!=typeof o.compareDocumentPosition&&(r=o===e||Boolean(16&o.compareDocumentPosition(e)))}if(r)return!0}return!1},u=function(n){if("touchmove"===n.type)return r=!0,!1;if(r)return r=!1,!1;var c=n.target||n.srcElement;angular.forEach(o,function(o,r){var u=t["*"]||[];o.elm.id&&""!==o.elm.id&&t["#"+o.elm.id]&&(u=u.concat(t["#"+o.elm.id])),angular.forEach(o.elm.classList,function(e){t["."+e]&&(u=u.concat(t["."+e]))}),o.elm.contains(c)||i(c,u)||e.$evalAsync(function(){o.cb(o.scope,{$event:n})})})};return document.addEventListener("touchmove",u,!0),document.addEventListener("touchend",u,!0),document.addEventListener("click",u,!0),{restrict:"A",compile:function(t,r){var i=n(r.offClick);return function(t,f){var l=c++,a=void 0,d=function(){o[l]={elm:f[0],cb:i,scope:t}},m=function(){o[l]=null,delete o[l]};r.offClickIf?a=e.$watch(function(){return n(r.offClickIf)(t)},function(e){e&&d()||!e&&m()}):d(),t.$on("$destroy",function(){m(),document.removeEventListener("touchmove",u,!0),document.removeEventListener("touchend",u,!0),document.removeEventListener("click",u,!0),a&&a(),f=null})}}}}]),angular.module("offClick").directive("offClickFilter",["OffClickFilterCache","$parse",function(e,n){var t=void 0;return{restrict:"A",compile:function(c,o){return function(c,r){t=n(o.offClickFilter)(c).split(",").map(function(e){return e.trim()}),t.forEach(function(n){e[n]?e[n].push(r[0]):e[n]=[r[0]]}),c.$on("$destroy",function(){t.forEach(function(n){angular.isArray(e[n])&&e[n].length>1?e[n].splice(e[n].indexOf(r[0]),1):(e[n]=null,delete e[n])}),r=null})}}}}]),angular.module("offClick").factory("OffClickFilterCache",function(){var e={};return e});